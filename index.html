<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">

	<title>Audio test</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	
    <p>微信监测</p>
	<script>  
    const browser = {
        versions: function () {
          var u = navigator.userAgent, app = navigator.appVersion;
          return {         //移动终端浏览器版本信息
            trident: u.indexOf('Trident') > -1, //IE内核
            presto: u.indexOf('Presto') > -1, //opera内核
            webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
            gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
            mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
            ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
            android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或uc浏览器
            iPhone: u.indexOf('iPhone') > -1, //是否为iPhone或者QQHD浏览器
            iPad: u.indexOf('iPad') > -1, //是否iPad
            webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
          };
        }(),
        language: (navigator.browserLanguage || navigator.language).toLowerCase()
   }


    // ios history.go(-1)回退页面无效处理
    window.addEventListener('pageshow',function(e){
      // 通过persisted属性判断是否存在 BF Cache
      if(e.persisted){
        location.reload();
      }

      var ua = navigator.userAgent.toLowerCase();//获取判断用的对象
      if (ua.match(/MicroMessenger/i) == "micromessenger") {
        //在微信中打开browserPrompt
        alert("點擊右上角三個點，在下方選擇“在瀏覽器打開”，選擇chrome瀏覽器打開")
      }else if((u.indexOf('qq') !== -1 && u.indexOf('mqqbrowser') === -1)){
        //  qq
         alert("點擊右上角三個點，在下方選擇“瀏覽器”，選擇chrome瀏覽器打開")
      }else if(ua.match(/WeiBo/i) == "weibo"){
        //  微博
         alert("點擊右上角三個點，在下方選擇“瀏覽器”，選擇chrome瀏覽器打開")
      }else if(/alipay/ig.test(u) ){
        //  支付寶
      }else if(u.indexOf('dingtalk') !== -1){
        //  釘釘
         alert("點擊右上角三個點，在下方選擇“默認瀏覽器打開”，選擇chrome瀏覽器打開")
      }
    });
	</script>
	
	
<script type="text/javascript">

  window.alert = function(msg, callback) {
      var div = document.createElement("div");
      div.innerHTML = "<style type=\"text/css\">"
              + ".nbaMask { position: fixed; z-index: 1000; top: 0; right: 0; left: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); }                                                                                                                                                                       "
              + ".nbaMaskTransparent { position: fixed; z-index: 1000; top: 0; right: 0; left: 0; bottom: 0; }                                                                                                                                                                                            "
              + ".nbaDialog { position: fixed; z-index: 5000; width: 80%; max-width: 300px; top: 50%; left: 50%; -webkit-transform: translate(-50%, -50%); transform: translate(-50%, -50%); background-color: #fff; text-align: center; border-radius: 8px; overflow: hidden; opacity: 1; color: white; }"
              + ".nbaDialog .nbaDialogHd { padding: .2rem .27rem .08rem .27rem; }                                                                                                                                                                                                                         "
              + ".nbaDialog .nbaDialogHd .nbaDialogTitle { font-size: 28px; font-weight: 400; }                                                                                                                                                                                                           "
              + ".nbaDialog .nbaDialogBd { padding: .8rem .8rem .8rem .8rem; font-size: 18px; line-height: 1.3; word-wrap: break-word; word-break: break-all; color: #000000; }                                                                                                                                          "
              + ".nbaDialog .nbaDialogFt { position: relative; line-height: 48px; font-size: 17px; display: -webkit-box; display: -webkit-flex; display: flex; }                                                                                                                                          "
              + ".nbaDialog .nbaDialogFt:after { content: \" \"; position: absolute; left: 0; top: 0; right: 0; height: 1px; border-top: 1px solid #e6e6e6; color: #e6e6e6; -webkit-transform-origin: 0 0; transform-origin: 0 0; -webkit-transform: scaleY(0.5); transform: scaleY(0.5); }               "
              + ".nbaDialog .nbaDialogBtn { display: block; -webkit-box-flex: 1; -webkit-flex: 1; flex: 1; color: #1E90FF; text-decoration: none; -webkit-tap-highlight-color: transparent; position: relative; margin-bottom: 0; }                                                                       "
              + ".nbaDialog .nbaDialogBtn:after { content: \" \"; position: absolute; left: 0; top: 0; width: 1px; bottom: 0; border-left: 1px solid #e6e6e6; color: #e6e6e6; -webkit-transform-origin: 0 0; transform-origin: 0 0; -webkit-transform: scaleX(0.5); transform: scaleX(0.5); }             "
              + ".nbaDialog a { text-decoration: none; -webkit-tap-highlight-color: transparent; }"
              + "</style>"
              + "<div id=\"dialogs2\" style=\"display: none\">"
              + "<div class=\"nbaMask\"></div>"
              + "<div class=\"nbaDialog\">"
              + "    <div class=\"nbaDialogHd\">"
              + "        <strong class=\"nbaDialogTitle\"></strong>"
              + "    </div>"
              + "    <div class=\"nbaDialogBd\" id=\"dialog_msg2\">弹窗内容，告知当前状态、信息和解决方法，描述文字尽量控制在三行内</div>"
              + "    <div class=\"nbaDialogHd\">"
              + "        <strong class=\"nbaDialogTitle\"></strong>"
              + "    </div>"
              + "    <div class=\"nbaDialogFt\">"
              + "    </div></div></div>";
      document.body.appendChild(div);
   
      var dialogs2 = document.getElementById("dialogs2");
      dialogs2.style.display = 'block';
   
      var dialog_msg2 = document.getElementById("dialog_msg2");
      dialog_msg2.innerHTML = msg;
   
      var dialog_ok2 = document.getElementById("dialog_ok2");
      dialog_ok2.onclick = function() {
          dialogs2.style.display = 'none';
          callback();
      };
  };
    
  </script>
</body>
</html>